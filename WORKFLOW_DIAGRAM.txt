╔════════════════════════════════════════════════════════════════════════════╗
║                                                                            ║
║                    📊 СХЕМА РАБОТЫ СИСТЕМЫ                                 ║
║                                                                            ║
╚════════════════════════════════════════════════════════════════════════════╝


🔄 ПРОЦЕСС СОЗДАНИЯ ОТЧЕТА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


    👷 МОНТАЖНИК                         🤖 БОТ                        💾 БД
       │                                  │                            │
       │  1. /new                         │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  2. Загружает фото (до 10)       │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  3. Заполняет данные             │                            │
       │     • Адрес                      │                            │
       │     • Роутер, порт               │                            │
       │     • Метраж кабелей             │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  4. Выбирает исполнителей        │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  5. Подтверждает                 │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │                                  │  6. Сохраняет в БД         │
       │                                  ├───────────────────────────>│
       │                                  │                            │
       │  7. Отчет с фото ✅              │                            │
       │<─────────────────────────────────┤                            │
       │                                  │                            │
                                          │                            │
                                          │  8. Публикует в канал      │
                                          ├──────────────┐             │
                                          │              │             │
                                          │              v             │
                              📺 КАНАЛ ДЛЯ ОТЧЕТОВ                     │
                                    (все видят)                        │
                                          │                            │
                                          v                            │
                          👥 ВСЕ ПОДПИСЧИКИ КАНАЛА                     │
                          (монтажники, админы, бухгалтерия)            │


📈 ФОРМИРОВАНИЕ СВОДНОГО ОТЧЕТА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


    👨‍💼 АДМИНИСТРАТОР                    🤖 БОТ                        💾 БД
       │                                  │                            │
       │  1. /report                      │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  2. Выбирает сотрудника          │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │  3. Выбирает период              │                            │
       │     • Неделя / Месяц / Все       │                            │
       ├─────────────────────────────────>│                            │
       │                                  │                            │
       │                                  │  4. Запрос к БД            │
       │                                  │     • Подключения          │
       │                                  │     • Расчет долей         │
       │                                  ├───────────────────────────>│
       │                                  │                            │
       │                                  │  5. Данные                 │
       │                                  │<───────────────────────────┤
       │                                  │                            │
       │                                  │  6. Генерация Excel        │
       │                                  │     • Форматирование       │
       │                                  │     • Итоги                │
       │                                  │                            │
       │  7. Excel-файл с отчетом 📊      │                            │
       │<─────────────────────────────────┤                            │


🔢 ЛОГИКА РАСЧЕТА МЕТРАЖА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    ВХОДНЫЕ ДАННЫЕ:
    ┌──────────────────────────────────────────────────────────┐
    │  Подключение #1                                          │
    │  • ВОЛС: 150 м                                           │
    │  • Витая пара: 23 м                                      │
    │  • Исполнители: Дмитрий З., Иванов Иван (2 человека)    │
    └──────────────────────────────────────────────────────────┘
                              │
                              │  РАСЧЕТ: делим поровну
                              v
    ┌──────────────────────────────────────────────────────────┐
    │  Каждому исполнителю:                                    │
    │  • ВОЛС: 150 / 2 = 75 м                                  │
    │  • Витая пара: 23 / 2 = 11.5 м                           │
    └──────────────────────────────────────────────────────────┘


📺 КАНАЛ ДЛЯ ОТЧЕТОВ - ПРЕИМУЩЕСТВА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    ┌─────────────────────────────────────────────────────────────┐
    │                    📺 ОБЩИЙ КАНАЛ                           │
    │                                                             │
    │  ✅ Все отчеты в одном месте                               │
    │  ✅ Видят все подписчики                                   │
    │  ✅ Поиск по любому параметру                              │
    │  ✅ История не теряется                                    │
    │  ✅ Можно пригласить руководство                           │
    └─────────────────────────────────────────────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              │               │               │
              v               v               v
       👷 Монтажники    👨‍💼 Админы      👩‍💼 Бухгалтерия
       
       • Видят работу    • Контроль      • Все данные
         коллег            в реал-тайм      для расчетов
       • Учатся на       • Легко найти   • Визуальное
         примерах          нужный отчет     подтверждение


🔐 БЕЗОПАСНОСТЬ И ПРАВА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    ┌────────────────────────────────────────────────────────────┐
    │  ДЕЙСТВИЕ                      │  КТО МОЖЕТ                │
    ├────────────────────────────────┼───────────────────────────┤
    │  Создать отчет                 │  Все пользователи         │
    │  Посмотреть свой отчет         │  Все пользователи         │
    │  Посмотреть отчеты в канале    │  Подписчики канала        │
    │  Получить сводный отчет        │  Все пользователи         │
    │  Управление сотрудниками       │  Только администраторы    │
    │  Настройка канала              │  Только администраторы    │
    └────────────────────────────────┴───────────────────────────┘


📊 ПОТОКИ ДАННЫХ:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    1. СОЗДАНИЕ ОТЧЕТА:
       Пользователь → Бот → БД → Пользователь ✅
                           │
                           └──> Канал ✅ (если настроен)

    2. СВОДНЫЙ ОТЧЕТ:
       Пользователь → Бот → БД → Excel → Пользователь ✅

    3. УПРАВЛЕНИЕ СОТРУДНИКАМИ:
       Админ → Бот → БД ✅


🔄 ЖИЗНЕННЫЙ ЦИКЛ ОТЧЕТА:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    1. СОЗДАНИЕ                    [Монтажник создает через бота]
              │
              v
    2. СОХРАНЕНИЕ В БД             [Все данные в базе данных]
              │
              ├──> ЛИЧКА           [Подтверждение монтажнику]
              │
              └──> КАНАЛ           [Публикация для всех]
              │
              v
    3. ИСПОЛЬЗОВАНИЕ               [Просмотр, поиск, статистика]
              │
              v
    4. ОТЧЕТЫ                      [Excel-отчеты по периодам]


═══════════════════════════════════════════════════════════════════════════

Эта схема показывает полный цикл работы системы от создания отчета
до его использования в сводных отчетах и канале.

═══════════════════════════════════════════════════════════════════════════
