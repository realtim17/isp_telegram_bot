# –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üìÖ –î–∞—Ç–∞: 6 –Ω–æ—è–±—Ä—è 2025

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ—Ç—á–µ—Ç–∞ –æ –Ω–æ–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏. –¢–µ–ø–µ—Ä—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 8 —à–∞–≥–æ–≤ (–≤–º–µ—Å—Ç–æ 7).

## ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –¢–∏–ø—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:
1. **–ú–ö–î** - –ú–Ω–æ–≥–æ–∫–≤–∞—Ä—Ç–∏—Ä–Ω—ã–π –¥–æ–º
2. **–ß–°** - –ß–∞—Å—Ç–Ω—ã–π —Å–µ–∫—Ç–æ—Ä  
3. **–Æ—Ä / –ì–æ—Å** - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ / –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω):

**–®–∞–≥ 1/8:** –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ‚¨ÖÔ∏è **–ù–û–í–û–ï**
- –ú–ö–î
- –ß–°
- –Æ—Ä / –ì–æ—Å

**–®–∞–≥ 2/8:** –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π (–¥–æ 10 —à—Ç)

**–®–∞–≥ 3/8:** –í–≤–æ–¥ –∞–¥—Ä–µ—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–®–∞–≥ 4/8:** –í–≤–æ–¥ –º–æ–¥–µ–ª–∏ —Ä–æ—É—Ç–µ—Ä–∞

**–®–∞–≥ 5/8:** –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–∞

**–®–∞–≥ 6/8:** –í–≤–æ–¥ –º–µ—Ç—Ä–∞–∂–∞ –í–û–õ–°

**–®–∞–≥ 7/8:** –í–≤–æ–¥ –º–µ—Ç—Ä–∞–∂–∞ –≤–∏—Ç–æ–π –ø–∞—Ä—ã

**–®–∞–≥ 8/8:** –í—ã–±–æ—Ä –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. `config.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `SELECT_CONNECTION_TYPE = 0`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–æ–º–µ—Ä–∞ –≤—Å–µ—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (+1)
- –î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–≤–∞—Ä—å `CONNECTION_TYPES` —Å —á–∏—Ç–∞–µ–º—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —Ç–∏–ø–æ–≤

```python
CONNECTION_TYPES = {
    'mkd': '–ú–ö–î',
    'chs': '–ß–°',
    'legal': '–Æ—Ä / –ì–æ—Å'
}
```

### 2. `database.py`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `connection_type` –≤ —Ç–∞–±–ª–∏—Ü—É `connections`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î (ALTER TABLE)
- –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `create_connection()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `connection_type`
- –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –≤ `get_employee_report()` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `connection_type` –≤ SELECT

### 3. `handlers/connection.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `select_connection_type()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `new_connection_start()` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä —Ç–∏–ø–∞
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–æ–º–µ—Ä–∞ —à–∞–≥–æ–≤ (1/7 ‚Üí 1/8, 2/7 ‚Üí 3/8 –∏ —Ç.–¥.)
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `show_confirmation()` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `confirm_connection()` - –ø–µ—Ä–µ–¥–∞–µ—Ç —Ç–∏–ø –≤ –ë–î

### 4. `utils/helpers.py`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `send_connection_report()` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ –æ—Ç—á–µ—Ç–µ
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `CONNECTION_TYPES` –∏–∑ config

### 5. `report_generator.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–¢–∏–ø" –≤ Excel-–æ—Ç—á–µ—Ç—ã
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç–æ–ª–±—Ü–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —à–∏—Ä–∏–Ω–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü)
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–æ–º–µ—Ä–∞ —Å—Ç–æ–ª–±—Ü–æ–≤ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π (7, 8 –≤–º–µ—Å—Ç–æ 6, 7)

### 6. `bot.py`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `SELECT_CONNECTION_TYPE` –∏–∑ config
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `select_connection_type` –∏–∑ handlers.connection
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `SELECT_CONNECTION_TYPE` –≤ ConversationHandler

## üìä –ì–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 1. –í –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:
```
üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:

üè¢ –¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: –ú–ö–î
üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π: 3
üìç –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞, 10
...
```

### 2. –í –æ—Ç—á–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é/–∫–∞–Ω–∞–ª–µ:
```
üìã –û–¢–ß–ï–¢ –û –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ò #123

üè¢ –¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: –ß–°
üìç –ê–¥—Ä–µ—Å: —É–ª. –õ–µ–Ω–∏–Ω–∞, 10
üåê –ú–æ–¥–µ–ª—å —Ä–æ—É—Ç–µ—Ä–∞: Mikrotik hAP ac¬≤
...
```

### 3. –í Excel-–æ—Ç—á–µ—Ç–µ:
–ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ "–¢–∏–ø" –º–µ–∂–¥—É "–°—Ç–æ–ª–±–µ—Ü" –∏ "–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏"

| –°—Ç–æ–ª–±–µ—Ü | –¢–∏–ø     | –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ | –ê–¥—Ä–µ—Å          | ... |
|---------|---------|-------------|----------------|-----|
| 1       | –ú–ö–î     | –ò–≤–∞–Ω–æ–≤ –ò.–ò. | —É–ª. –õ–µ–Ω–∏–Ω–∞, 10 | ... |
| 2       | –ß–°      | –ü–µ—Ç—Ä–æ–≤ –ü.–ü. | —É–ª. –ú–∏—Ä–∞, 5    | ... |
| 3       | –Æ—Ä / –ì–æ—Å| –°–∏–¥–æ—Ä–æ–≤ –°.–°.| –ø—Ä. –ü–æ–±–µ–¥—ã, 1  | ... |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ `connection_type` –≤ —Ç–∞–±–ª–∏—Ü—É `connections`
- –í—Å–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∑–∞–ø–∏—Å—è–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `'mkd'` (–ú–ö–î)
- –ù–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:
- [x] –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–ú–ö–î, –ß–°, –Æ—Ä/–ì–æ—Å)
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤ –ë–î
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤ –æ—Ç—á–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤ Excel-–æ—Ç—á–µ—Ç–µ
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è)
- [x] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –ù–µ—Ç –ª–∏–Ω—Ç–µ—Ä-–æ—à–∏–±–æ–∫

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã connections (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
CREATE TABLE connections (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    connection_type TEXT NOT NULL DEFAULT 'mkd',  -- –ù–û–í–û–ï –ü–û–õ–ï
    address TEXT NOT NULL,
    router_model TEXT NOT NULL,
    port TEXT NOT NULL,
    fiber_meters REAL NOT NULL,
    twisted_pair_meters REAL NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by INTEGER NOT NULL
);
```

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–ª—é—á–∏ —Ç–∏–ø–æ–≤:
- `mkd` ‚Üí "–ú–ö–î"
- `chs` ‚Üí "–ß–°"  
- `legal` ‚Üí "–Æ—Ä / –ì–æ—Å"

## üìå –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –ø–æ–ª—É—á–∞—Ç —Ç–∏–ø `'mkd'` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ:** –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ—Ç—á–µ—Ç–∞
3. **–ù—É–º–µ—Ä–∞—Ü–∏—è —à–∞–≥–æ–≤:** –í—Å–µ —à–∞–≥–∏ —Å–¥–≤–∏–Ω—É–ª–∏—Å—å –Ω–∞ 1 (—Ç–µ–ø–µ—Ä—å 8 —à–∞–≥–æ–≤ –≤–º–µ—Å—Ç–æ 7)
4. **Excel-–æ—Ç—á–µ—Ç—ã:** –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü "–¢–∏–ø" (–≤—Å–µ–≥–æ 9 —Å—Ç–æ–ª–±—Ü–æ–≤ –≤–º–µ—Å—Ç–æ 8)

## üöÄ –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –±–æ—Ç–∞

```bash
cd /Users/tim_not/isp_telegram_bot
source .venv311/bin/activate
python bot.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç:
```bash
./RESTART_BOT.sh
```

## ‚ú® –°—Ç–∞—Ç—É—Å

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ**  
‚úÖ **–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ**  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**

---

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** AI Assistant  
**–î–∞—Ç–∞:** 6 –Ω–æ—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.1 (–¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è)

